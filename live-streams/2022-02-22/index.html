<!doctype html>
<html lang="en-us" data-theme="dark">
  <head>
    
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>
      Flux Harmonic
      
    </title>
    
    
    
    
  <meta property="og:title" content="Building a Mesche Module for Graphics">
  <meta property="og:url" content="https://fluxharmonic.com/live-streams/2022-02-22/">
  
  
  <meta name="twitter:card" content="summary_large_image">

    <link rel="stylesheet" href="https://fluxharmonic.com/static/style.css" type="text/css" />
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Lora&family=Space+Mono&display=swap" />
    <script defer data-domain="fluxharmonic.com" src="https://plausible.io/js/plausible.js"></script>
    
  </head>
  <body>
    
    
      <header>
        <a href="https://fluxharmonic.com/">
          <img class="logo" src="https://fluxharmonic.com/static/Flux-Harmonic-Site-Logo.png" alt="Flux Harmonic"/>
        </a>
        <nav>
          <ul>
            <li><a href="https://fluxharmonic.com/live-streams/index.html">Live Streams</a></li>
            <li><a href="https://fluxharmonic.com/how-to-help/">How To Help</a></li>
            <li><a href="https://youtube.com/FluxHarmonicLive">YouTube</a></li>
            <li><a href="https://github.com/FluxHarmonic">GitHub</a></li>
          </ul>
        </nav>
      </header>
    

    
    <main id="main">
      
  <article class="post">
    <h1 class="post__title">
      Building a Mesche Module for Graphics
    </h1>
    <section class="post__meta">
      
        Feb 22, 2022
      
    </section>
    <section>
      <p>
<b>Today's goal:</b> Continue building out the <code>flux graphics</code> module in Mesche!
</p>

<div id="outline-container-updates" class="outline-2">
<h2 id="updates">Updates</h2>
<div class="outline-text-2">
<ul class="org-ul">
<li>Added support for cons pairs, lists, and backquoting</li>
<li>Added initial support for modules!</li>
<li>I'm thinking about participating in Ludum Dare April 1: <a href="https://ludumdare.com/">https://ludumdare.com/</a></li>
</ul>
</div>
</div>

<div id="outline-container-the-mesche-module-system" class="outline-2">
<h2 id="the-mesche-module-system">The Mesche module system</h2>
<div class="outline-text-2">
<p>
Over the last few days, I wrote a new module system for Mesche that allows you to do the following:
</p>

<ul class="org-ul">
<li>Define modules in source files</li>
<li>Mark functions and variables to be exported from the module</li>
<li>Import symbols exported by other modules (no load path yet!)</li>
</ul>

<p>
Here's what it looks like:
</p>

<div class="org-src-container">
<pre class="src src-scheme">
;; Define the first module
(define-module (mesche-sample one))

(define one-value 311 :export)

(define (one-print str) :export
  (display "This string comes from ")
  (display str)
  (display "!"))

;; Define the second module
(define-module (mesche-sample two)
  (import (mesche-sample one)))

(define (two-print str) :export
  (one-print "(mesche-sample two)")
  (display " ")
  (display str))

;; Switch to the user module and import something!
(define-module (mesche-user)
  (import (mesche-sample two)))

;; Call the imported function
(two-print "Hello modular world!")

</pre>
</div>
</div>
</div>

<div id="outline-container-tasks" class="outline-2">
<h2 id="tasks">Tasks</h2>
<div class="outline-text-2" id="text-tasks">
</div>
<div id="outline-container-finish-building-out-the-functions-to-describe-the-full-thumbnail" class="outline-3">
<h3 id="finish-building-out-the-functions-to-describe-the-full-thumbnail"><span class="done DONE">DONE</span> Finish building out the functions to describe the full thumbnail</h3>
<div class="outline-text-3">
</div>
</div>

<div id="outline-container-ensure-we-can-dynamically-re-evaluate-the-scene-description" class="outline-3">
<h3 id="ensure-we-can-dynamically-re-evaluate-the-scene-description"><span class="todo TODO">TODO</span> Ensure we can dynamically re-evaluate the scene description</h3>
</div>
<div id="outline-container-start-working-on-load-path-support" class="outline-3">
<h3 id="start-working-on-load-path-support"><span class="todo TODO">TODO</span> Start working on load path support</h3>
</div>
</div>

<div id="outline-container-notes" class="outline-2">
<h2 id="notes">Notes</h2>
<div class="outline-text-2">
<p>
The code for this stream can be found here:
</p>

<p>
<a href="https://github.com/FluxHarmonic/flux-compose/commit/8c86b7ce8aaf6b190a2f0e6029aaaf52f8e5e074">https://github.com/FluxHarmonic/flux-compose/commit/8c86b7ce8aaf6b190a2f0e6029aaaf52f8e5e074</a>
</p>
</div>
</div>

<div id="outline-container-next-steps" class="outline-2">
<h2 id="next-steps">Next Steps</h2>
<div class="outline-text-2" id="text-next-steps">
</div>
<div id="outline-container-implement-asynchronous-repl-support" class="outline-3">
<h3 id="implement-asynchronous-repl-support"><span class="todo TODO">TODO</span> Implement asynchronous REPL support</h3>
</div>
<div id="outline-container-ensure-we-can-dynamically-re-evaluate-the-scene-description" class="outline-3">
<h3 id="ensure-we-can-dynamically-re-evaluate-the-scene-description"><span class="todo TODO">TODO</span> Ensure we can dynamically re-evaluate the scene description</h3>
</div>
<div id="outline-container-implement-module-load-path-support" class="outline-3">
<h3 id="implement-module-load-path-support"><span class="todo TODO">TODO</span> Implement module load path support</h3>
</div>
</div>

    </section>
  </article>

    </main>

    
    
      <footer>&copy; 2022 Flux Harmonic</footer>
    

  </body>
</html>

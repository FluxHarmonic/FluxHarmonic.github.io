#+title: I Rewrote The Graphics Layer...
#+date: [2022-02-03]
#+slug: 2022-02-03

*Today's goal:* Finish our initial implementation of TrueType font rendering!

* Updates

- Join the Discord for Flux Harmonic: https://discord.gg/ryy97Rdw
- I rewrote the graphics layer

* So about those OpenGL APIs...

After Tuesday's stream, I looked at the OpenGL text rendering sample we were using from learnopengl.com.  I then realized why they were using shaders!

That led me on a path to get shaders working in the engine, and then I realized I had been using deprecated OpenGL APIs since we switched from SDL to GLFW...

I've rewritten all of the rendering logic to now use vertex arrays and shaders!  This actually puts us in a perfect spot for future work.

*Benefits*

- Potential for much better rendering performance
- Can more efficiently pass our data structures directly to OpenGL
- Shaders give us *many* possibilities for rendering effects

* Tasks

** TODO Rewrite glyph renderer using new OpenGL APIs and a shader
** TODO Implement proper glyph alignment
** TODO Maybe add a nice gradient to rendered text?
** TODO Use FontConfig to find the font by name

* Notes

The code for this stream can be found here:

[updated after the stream]

*References*

- https://learnopengl.com/In-Practice/Text-Rendering
- Getting fonts with FontConfig: https://stackoverflow.com/questions/10542832/how-to-use-fontconfig-to-get-font-list-c-c

* Next Steps

** TODO Render all glyphs to a single texture atlas for performance
** TODO Possibly "bake" a texture for static strings to reduce draw calls
